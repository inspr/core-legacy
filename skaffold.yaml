apiVersion: skaffold/v2beta10
kind: Config
metadata:
  name: core
build:
  artifacts:
  - image: gcr.io/red-inspr/insprd
    context: .
    docker:
      dockerfile: cmd/insprd/Dockerfile
  - image: gcr.io/red-inspr/inspr/sidecar/kafka
    context: .
    docker:
      dockerfile: cmd/sidecars/kafka/Dockerfile
  - image: gcr.io/red-inspr/authsvc
    context: .
    docker:
      dockerfile: cmd/insprd/auth/Dockerfile
deploy:
  helm:
    releases:
    - name: insprd
      artifactOverrides:
        insprdRepository: gcr.io/red-inspr/insprd
        kafkaSidecarImage: gcr.io/red-inspr/inspr/sidecar/kafka
        authRepository: gcr.io/red-inspr/authsvc
      chartPath: build/helm
